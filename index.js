// Copyright (c) 2023 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("path"),require("http"),require("fs"),require("child_process"),require("process"),require("buffer")):"function"==typeof define&&define.amd?define(["path","http","fs","child_process","process","buffer"],r):(e="undefined"!=typeof globalThis?globalThis:e||self).net=r(e.require$$0$5,e.require$$0,e.require$$0$1,e.require$$0$3,e.require$$0$2,e.require$$0$4)}(this,(function(e,r,t,n,o,i){"use strict";var a="function"==typeof Object.defineProperty?Object.defineProperty:null;var u=Object.defineProperty;function s(e){return"number"==typeof e}function c(e){var r,t="";for(r=0;r<e;r++)t+="0";return t}function l(e,r,t){var n=!1,o=r-e.length;return o<0||(function(e){return"-"===e[0]}(e)&&(n=!0,e=e.substr(1)),e=t?e+c(o):c(o)+e,n&&(e="-"+e)),e}var f=String.prototype.toLowerCase,p=String.prototype.toUpperCase;function d(e){var r,t,n;switch(e.specifier){case"b":r=2;break;case"o":r=8;break;case"x":case"X":r=16;break;default:r=10}if(t=e.arg,n=parseInt(t,10),!isFinite(n)){if(!s(t))throw new Error("invalid integer. Value: "+t);n=0}return n<0&&("u"===e.specifier||10!==r)&&(n=4294967295+n+1),n<0?(t=(-n).toString(r),e.precision&&(t=l(t,e.precision,e.padRight)),t="-"+t):(t=n.toString(r),n||e.precision?e.precision&&(t=l(t,e.precision,e.padRight)):t="",e.sign&&(t=e.sign+t)),16===r&&(e.alternate&&(t="0x"+t),t=e.specifier===p.call(e.specifier)?p.call(t):f.call(t)),8===r&&e.alternate&&"0"!==t.charAt(0)&&(t="0"+t),t}function g(e){return"string"==typeof e}var v=Math.abs,h=String.prototype.toLowerCase,m=String.prototype.toUpperCase,y=String.prototype.replace,b=/e\+(\d)$/,w=/e-(\d)$/,j=/^(\d+)$/,S=/^(\d+)e/,E=/\.0$/,O=/\.0*e/,T=/(\..*[^0])0*e/;function _(e){var r,t,n=parseFloat(e.arg);if(!isFinite(n)){if(!s(e.arg))throw new Error("invalid floating-point number. Value: "+t);n=e.arg}switch(e.specifier){case"e":case"E":t=n.toExponential(e.precision);break;case"f":case"F":t=n.toFixed(e.precision);break;case"g":case"G":v(n)<1e-4?((r=e.precision)>0&&(r-=1),t=n.toExponential(r)):t=n.toPrecision(e.precision),e.alternate||(t=y.call(t,T,"$1e"),t=y.call(t,O,"e"),t=y.call(t,E,""));break;default:throw new Error("invalid double notation. Value: "+e.specifier)}return t=y.call(t,b,"e+0$1"),t=y.call(t,w,"e-0$1"),e.alternate&&(t=y.call(t,j,"$1."),t=y.call(t,S,"$1.e")),n>=0&&e.sign&&(t=e.sign+t),t=e.specifier===m.call(e.specifier)?m.call(t):h.call(t)}function x(e){var r,t="";for(r=0;r<e;r++)t+=" ";return t}function k(e,r,t){var n=r-e.length;return n<0?e:e=t?e+x(n):x(n)+e}var $=String.fromCharCode,V=isNaN,C=Array.isArray;function I(e){var r={};return r.specifier=e.specifier,r.precision=void 0===e.precision?1:e.precision,r.width=e.width,r.flags=e.flags||"",r.mapping=e.mapping,r}function P(e){var r,t,n,o,i,a,u,s,c;if(!C(e))throw new TypeError("invalid argument. First argument must be an array. Value: `"+e+"`.");for(a="",u=1,s=0;s<e.length;s++)if(g(n=e[s]))a+=n;else{if(r=void 0!==n.precision,!(n=I(n)).specifier)throw new TypeError("invalid argument. Token is missing `specifier` property. Index: `"+s+"`. Value: `"+n+"`.");for(n.mapping&&(u=n.mapping),t=n.flags,c=0;c<t.length;c++)switch(o=t.charAt(c)){case" ":n.sign=" ";break;case"+":n.sign="+";break;case"-":n.padRight=!0,n.padZeros=!1;break;case"0":n.padZeros=t.indexOf("-")<0;break;case"#":n.alternate=!0;break;default:throw new Error("invalid flag: "+o)}if("*"===n.width){if(n.width=parseInt(arguments[u],10),u+=1,V(n.width))throw new TypeError("the argument for * width at position "+u+" is not a number. Value: `"+n.width+"`.");n.width<0&&(n.padRight=!0,n.width=-n.width)}if(r&&"*"===n.precision){if(n.precision=parseInt(arguments[u],10),u+=1,V(n.precision))throw new TypeError("the argument for * precision at position "+u+" is not a number. Value: `"+n.precision+"`.");n.precision<0&&(n.precision=1,r=!1)}switch(n.arg=arguments[u],n.specifier){case"b":case"o":case"x":case"X":case"d":case"i":case"u":r&&(n.padZeros=!1),n.arg=d(n);break;case"s":n.maxWidth=r?n.precision:-1;break;case"c":if(!V(n.arg)){if((i=parseInt(n.arg,10))<0||i>127)throw new Error("invalid character code. Value: "+n.arg);n.arg=V(i)?String(n.arg):$(i)}break;case"e":case"E":case"f":case"F":case"g":case"G":r||(n.precision=6),n.arg=_(n);break;default:throw new Error("invalid specifier: "+n.specifier)}n.maxWidth>=0&&n.arg.length>n.maxWidth&&(n.arg=n.arg.substring(0,n.maxWidth)),n.padZeros?n.arg=l(n.arg,n.width||n.precision,n.padRight):n.width&&(n.arg=k(n.arg,n.width,n.padRight)),a+=n.arg||"",u+=1}return a}var A=/%(?:([1-9]\d*)\$)?([0 +\-#]*)(\*|\d+)?(?:(\.)(\*|\d+)?)?[hlL]?([%A-Za-z])/g;function F(e){var r={mapping:e[1]?parseInt(e[1],10):void 0,flags:e[2],width:e[3],precision:e[5],specifier:e[6]};return"."===e[4]&&void 0===e[5]&&(r.precision="1"),r}function q(e){var r,t,n,o;for(t=[],o=0,n=A.exec(e);n;)(r=e.slice(o,A.lastIndex-n[0].length)).length&&t.push(r),t.push(F(n)),o=A.lastIndex,n=A.exec(e);return(r=e.slice(o)).length&&t.push(r),t}function L(e){return"string"==typeof e}function N(e){var r,t,n;if(!L(e))throw new TypeError(N("invalid argument. First argument must be a string. Value: `%s`.",e));for(r=q(e),(t=new Array(arguments.length))[0]=r,n=1;n<t.length;n++)t[n]=arguments[n];return P.apply(null,t)}var R,H=Object.prototype,B=H.toString,M=H.__defineGetter__,D=H.__defineSetter__,z=H.__lookupGetter__,G=H.__lookupSetter__;R=function(){try{return a({},"x",{}),!0}catch(e){return!1}}()?u:function(e,r,t){var n,o,i,a;if("object"!=typeof e||null===e||"[object Array]"===B.call(e))throw new TypeError(N("invalid argument. First argument must be an object. Value: `%s`.",e));if("object"!=typeof t||null===t||"[object Array]"===B.call(t))throw new TypeError(N("invalid argument. Property descriptor must be an object. Value: `%s`.",t));if((o="value"in t)&&(z.call(e,r)||G.call(e,r)?(n=e.__proto__,e.__proto__=H,delete e[r],e[r]=t.value,e.__proto__=n):e[r]=t.value),i="get"in t,a="set"in t,o&&(i||a))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return i&&M&&M.call(e,r,t.get),a&&D&&D.call(e,r,t.set),e};var W=R;function U(e,r,t){W(e,r,{configurable:!1,enumerable:!0,writable:!1,value:t})}function X(e){if(e.__esModule)return e;var r=e.default;if("function"==typeof r){var t=function e(){if(this instanceof e){var t=[null];t.push.apply(t,arguments);var n=Function.bind.apply(r,t);return new n}return r.apply(this,arguments)};t.prototype=r.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}var Z=X(Object.freeze({__proto__:null,default:()=>()=>{}}));function Y(e){return Object.keys(Object(e))}var J=void 0!==Object.keys;var K="function"==typeof Symbol&&"symbol"==typeof Symbol("foo");function Q(){return K&&"symbol"==typeof Symbol.toStringTag}var ee=Object.prototype.toString;var re=Object.prototype.hasOwnProperty;function te(e,r){return null!=e&&re.call(e,r)}var ne="function"==typeof Symbol?Symbol:void 0,oe="function"==typeof ne?ne.toStringTag:"";var ie,ae=Q()?function(e){var r,t,n;if(null==e)return ee.call(e);t=e[oe],r=te(e,oe);try{e[oe]=void 0}catch(r){return ee.call(e)}return n=ee.call(e),r?e[oe]=t:delete e[oe],n}:function(e){return ee.call(e)};function ue(e){return"[object Arguments]"===ae(e)}ie=function(){return ue(arguments)}();var se=ie;function ce(e,r,t){W(e,r,{configurable:!1,enumerable:!1,writable:!1,value:t})}function le(e){return"string"==typeof e}var fe=String.prototype.valueOf;var pe=Q();function de(e){return"object"==typeof e&&(e instanceof String||(pe?function(e){try{return fe.call(e),!0}catch(e){return!1}}(e):"[object String]"===ae(e)))}function ge(e){return le(e)||de(e)}function ve(e){return"number"==typeof e}ce(ge,"isPrimitive",le),ce(ge,"isObject",de);var he=Number,me=he.prototype.toString;var ye=Q();function be(e){return"object"==typeof e&&(e instanceof he||(ye?function(e){try{return me.call(e),!0}catch(e){return!1}}(e):"[object Number]"===ae(e)))}function we(e){return ve(e)||be(e)}function je(e){return e!=e}function Se(e){return ve(e)&&je(e)}function Ee(e){return be(e)&&je(e.valueOf())}function Oe(e){return Se(e)||Ee(e)}ce(we,"isPrimitive",ve),ce(we,"isObject",be),ce(Oe,"isPrimitive",Se),ce(Oe,"isObject",Ee);var Te=Number.POSITIVE_INFINITY,_e=he.NEGATIVE_INFINITY,xe=Math.floor;function ke(e){return xe(e)===e}function $e(e){return e<Te&&e>_e&&ke(e)}function Ve(e){return ve(e)&&$e(e)}function Ce(e){return be(e)&&$e(e.valueOf())}function Ie(e){return Ve(e)||Ce(e)}ce(Ie,"isPrimitive",Ve),ce(Ie,"isObject",Ce);var Pe=Object.prototype.propertyIsEnumerable;var Ae=!Pe.call("beep","0");function Fe(e,r){var t;return null!=e&&(!(t=Pe.call(e,r))&&Ae&&ge(e)?!Se(r=+r)&&Ve(r)&&r>=0&&r<e.length:t)}var qe=Array.isArray?Array.isArray:function(e){return"[object Array]"===ae(e)};var Le=se?ue:function(e){return null!==e&&"object"==typeof e&&!qe(e)&&"number"==typeof e.length&&ke(e.length)&&e.length>=0&&e.length<=4294967295&&te(e,"callee")&&!Fe(e,"callee")},Ne=Array.prototype.slice;function Re(e){return null!==e&&"object"==typeof e}function He(){}ce(Re,"isObjectLikeArray",function(e){if("function"!=typeof e)throw new TypeError(N("invalid argument. Must provide a function. Value: `%s`.",e));return function(r){var t,n;if(!qe(r))return!1;if(0===(t=r.length))return!1;for(n=0;n<t;n++)if(!1===e(r[n]))return!1;return!0}}(Re));var Be=Fe(He,"prototype"),Me=!Fe({toString:null},"toString");function De(e){return"object"==typeof e&&null!==e&&"number"==typeof e.length&&ke(e.length)&&e.length>=0&&e.length<=9007199254740991}function ze(e,r,t){var n,o;if(!De(e)&&!le(e))throw new TypeError(N("invalid argument. First argument must be an array-like object. Value: `%s`.",e));if(0===(n=e.length))return-1;if(3===arguments.length){if(!Ve(t))throw new TypeError(N("invalid argument. Third argument must be an integer. Value: `%s`.",t));if(t>=0){if(t>=n)return-1;o=t}else(o=n+t)<0&&(o=0)}else o=0;if(Oe(r)){for(;o<n;o++)if(Oe(e[o]))return o}else for(;o<n;o++)if(e[o]===r)return o;return-1}var Ge=/./;function We(e){return"boolean"==typeof e}var Ue=Boolean,Xe=Boolean.prototype.toString;var Ze=Q();function Ye(e){return"object"==typeof e&&(e instanceof Ue||(Ze?function(e){try{return Xe.call(e),!0}catch(e){return!1}}(e):"[object Boolean]"===ae(e)))}function Je(e){return We(e)||Ye(e)}function Ke(){return new Function("return this;")()}ce(Je,"isPrimitive",We),ce(Je,"isObject",Ye);var Qe="object"==typeof self?self:null,er="object"==typeof window?window:null,rr="object"==typeof global?global:null,tr="object"==typeof globalThis?globalThis:null;var nr=function(e){if(arguments.length){if(!We(e))throw new TypeError(N("invalid argument. Must provide a boolean. Value: `%s`.",e));if(e)return Ke()}if(tr)return tr;if(Qe)return Qe;if(er)return er;if(rr)return rr;throw new Error("unexpected error. Unable to resolve global object.")}(),or=nr.document&&nr.document.childNodes,ir=Int8Array;function ar(){return/^\s*function\s*([^(]*)/i}var ur=/^\s*function\s*([^(]*)/i;function sr(e){return Re(e)&&(e._isBuffer||e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e))}function cr(e){var r,t,n;if(("Object"===(t=ae(e).slice(8,-1))||"Error"===t)&&e.constructor){if("string"==typeof(n=e.constructor).name)return n.name;if(r=ur.exec(n.toString()))return r[1]}return sr(e)?"Buffer":t}ce(ar,"REGEXP",ur);var lr="function"==typeof Ge||"object"==typeof ir||"function"==typeof or?function(e){return cr(e).toLowerCase()}:function(e){var r;return null===e?"null":"object"===(r=typeof e)?cr(e).toLowerCase():r};function fr(e){return e.constructor&&e.constructor.prototype===e}var pr=["console","external","frame","frameElement","frames","innerHeight","innerWidth","outerHeight","outerWidth","pageXOffset","pageYOffset","parent","scrollLeft","scrollTop","scrollX","scrollY","self","webkitIndexedDB","webkitStorageInfo","window"],dr="undefined"==typeof window?void 0:window;var gr=function(){var e;if("undefined"===lr(dr))return!1;for(e in dr)try{-1===ze(pr,e)&&te(dr,e)&&null!==dr[e]&&"object"===lr(dr[e])&&fr(dr[e])}catch(e){return!0}return!1}(),vr="undefined"!=typeof window;var hr,mr=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];hr=J?function(){return 2!==(Y(arguments)||"").length}(1,2)?function(e){return Le(e)?Y(Ne.call(e)):Y(e)}:Y:function(e){var r,t,n,o,i,a,u;if(o=[],Le(e)){for(u=0;u<e.length;u++)o.push(u.toString());return o}if("string"==typeof e){if(e.length>0&&!te(e,"0"))for(u=0;u<e.length;u++)o.push(u.toString())}else{if(!1==(n="function"==typeof e)&&!Re(e))return o;t=Be&&n}for(i in e)t&&"prototype"===i||!te(e,i)||o.push(String(i));if(Me)for(r=function(e){if(!1===vr&&!gr)return fr(e);try{return fr(e)}catch(e){return!1}}(e),u=0;u<mr.length;u++)a=mr[u],r&&"constructor"===a||!te(e,a)||o.push(String(a));return o};var yr=hr;function br(e){return"function"===lr(e)}function wr(e){return Ve(e)&&e>=0}function jr(e){return Ce(e)&&e.valueOf()>=0}function Sr(e){return wr(e)||jr(e)}ce(Sr,"isPrimitive",wr),ce(Sr,"isObject",jr);var Er,Or=Object,Tr=Object.getPrototypeOf;Er=br(Object.getPrototypeOf)?Tr:function(e){var r=function(e){return e.__proto__}(e);return r||null===r?r:"[object Function]"===ae(e.constructor)?e.constructor.prototype:e instanceof Object?Object.prototype:null};var _r=Er;var xr=Object.prototype;function kr(e){var r;return!!function(e){return"object"==typeof e&&null!==e&&!qe(e)}(e)&&(r=function(e){return null==e?null:(e=Or(e),_r(e))}(e),!r||!te(e,"constructor")&&te(r,"constructor")&&br(r.constructor)&&"[object Function]"===ae(r.constructor)&&te(r,"isPrototypeOf")&&br(r.isPrototypeOf)&&(r===xr||function(e){var r;for(r in e)if(!te(e,r))return!1;return!0}(e)))}function $r(e,r){return kr(r)?te(r,"port")&&(e.port=r.port,!wr(e.port))?new TypeError(N("invalid option. `%s` option must be a nonnegative integer. Option: `%s`.","port",e.port)):te(r,"maxport")&&(e.maxport=r.maxport,!wr(e.maxport))?new TypeError(N("invalid option. `%s` option must be a nonnegative integer. Option: `%s`.","maxport",e.maxport)):te(r,"hostname")&&(e.hostname=r.hostname,!le(e.hostname))?new TypeError(N("invalid option. `%s` option must be a string. Option: `%s`.","hostname",e.hostname)):te(r,"address")&&(e.address=r.address,!le(e.address))?new TypeError(N("invalid option. `%s` option must be a string. Option: `%s`.","address",e.address)):null:new TypeError(N("invalid argument. Options argument must be an object. Value: `%s`.",r))}var Vr=0,Cr="127.0.0.1",Ir=r,Pr=Z("./../../http-server");function Ar(){var e,r,t,n,o,i,a,u;if(o={},1===(n=arguments.length))br(arguments[0])?e=arguments[0]:u=$r(o,t=arguments[0]);else if(n>1){if(t=arguments[0],!br(e=arguments[1]))throw new TypeError(N("invalid argument. Request listener must be a function. Value: `%s`.",e));u=$r(o,t)}if(u)throw u;return i=void 0===o.port?Vr:o.port,Pr("Server port: %d",i),a=void 0===o.maxport?i:o.maxport,Pr("Max server port: %d",a),r=o.hostname?o.hostname:o.address?o.address:Cr,Pr("Server hostname: %s",r),s;function s(t){var n;if(!br(t))throw new TypeError(N("invalid argument. Callback argument must be a function. Value: `%s`.",t));(n=e?Ir.createServer(e):Ir.createServer()).on("error",(function(e){if("EADDRINUSE"===e.code&&(Pr("Server address already in use: %s:%d.",r,i),(i+=1)<=a))return Pr("Attempting to listen on %s:%d.",r,i),void n.listen(i,r);throw e})),n.once("listening",(function(){var e=n.address();Pr("HTTP server initialized. Server is listening for requests on %s:%d.",e.address,e.port),t(null,n)})),Pr("Attempting to listen on %s:%d.",r,i),n.listen(i,r)}}var Fr=t.readFile;var qr=t.readFileSync;function Lr(e,r){var t;try{t=arguments.length>1?qr(e,r):qr(e)}catch(e){return e}return t}ce((function(){var e,r;for(e=[],r=0;r<arguments.length;r++)e.push(arguments[r]);Fr.apply(null,e)}),"sync",Lr);var Nr=o.platform,Rr="win32"===Nr,Hr="darwin"===Nr,Br=/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?[^#]*)?(?:#.*)?/,Mr=/[^a-z0-9:\/?#\[\]@!$&'()*+,;=.\-_~%]/i,Dr=/%[^0-9a-f]/i,zr=/%[0-9a-f](:?[^0-9a-f]|$)/i,Gr=/^\/\//,Wr=/^[a-z][a-z0-9+\-.]*$/;var Ur,Xr,Zr=n.spawn;function Yr(e){var r,t,n;if(!function(e){var r,t,n,o;return!(!le(e)||Mr.test(e)||Dr.test(e)||zr.test(e)||(t=(n=e.match(Br))[1],r=n[2],o=n[3],!(t&&t.length&&Wr.test(t.toLowerCase()))||!r&&Gr.test(o)))}(e))throw new TypeError(N("invalid argument. Must provide a valid URI. Value: `%s`.",e));for(r=new Array(Ur.length),n=0;n<Ur.length;n++)r[n]=Ur[n];return Rr&&(e=e.replace(/&/g,"^&")),r.push(e),(t=Zr(Xr,r,{})).unref(),t}Hr?(Xr="open",Ur=[]):Rr?(Xr="cmd",Ur=["/c","start",'""']):(Xr="xdg-open",Ur=[]);var Jr="function"==typeof Buffer?Buffer:null;var Kr,Qr=i.Buffer;Kr=function(){var e,r;if("function"!=typeof Jr)return!1;try{e=sr(r="function"==typeof Jr.from?Jr.from([1,2,3,4]):new Jr([1,2,3,4]))&&1===r[0]&&2===r[1]&&3===r[2]&&4===r[3]}catch(r){e=!1}return e}()?Qr:function(){throw new Error("not implemented")};var et,rt=Kr;et=br(rt.from)?function(e,r){if(!le(e))throw new TypeError(N("invalid argument. First argument must be a string. Value: `%s`.",e));if(arguments.length>1){if(!le(r))throw new TypeError(N("invalid argument. Second argument must be a string. Value: `%s`.",r));return rt.from(e,r)}return rt.from(e,"utf8")}:function(e,r){if(!le(e))throw new TypeError(N("invalid argument. First argument must be a string. Value: `%s`.",e));if(arguments.length>1){if(!le(r))throw new TypeError(N("invalid argument. Second argument must be a string. Value: `%s`.",r));return new rt(e,r)}return new rt(e,"utf8")};var tt=et,nt=o;function ot(e){var r,t;for(r=[],t=1;t<arguments.length;t++)r.push(arguments[t]);function n(){e.apply(null,r)}nt.nextTick(n)}function it(e,r){return kr(r)?!te(r,"html")||(e.html=r.html,sr(e.html)||le(e.html))?!te(r,"javascript")||(e.javascript=r.javascript,sr(e.javascript)||le(e.javascript))?te(r,"open")&&(e.open=r.open,!We(e.open))?new TypeError(N("invalid option. `%s` option must be a boolean. Option: `%s`.","open",e.open)):null:new TypeError(N("invalid option. `%s` option must be either a Buffer or a string. Option: `%s`.","javascript",e.javascript)):new TypeError(N("invalid option. `%s` option must be either a Buffer or a string. Option: `%s`.","html",e.html)):new TypeError(N("invalid argument. Options argument must be an object. Value: `%s`.",r))}function at(e){var r={};return te(e,"port")&&(r.port=e.port),te(e,"maxport")&&(r.maxport=e.maxport),te(e,"hostname")&&(r.hostname=e.hostname),te(e,"address")&&(r.address=e.address),r}var ut=e,st=Z("disposable-http-server");var ct=o;function lt(){return ct.cwd()}function ft(e,r){return kr(r)?te(r,"dir")&&(e.dir=r.dir,!le(e.dir))?new TypeError(N("invalid option. `%s` option must be a string. Option: `%s`.","dir",e.dir)):te(r,"open")&&(e.open=r.open,!We(e.open))?new TypeError(N("invalid option. `%s` option must be a boolean. Option: `%s`.","open",e.open)):null:new TypeError(N("invalid argument. Options argument must be an object. Value: `%s`.",r))}function pt(e){var r={};return te(e,"port")&&(r.port=e.port),te(e,"maxport")&&(r.maxport=e.maxport),te(e,"hostname")&&(r.hostname=e.hostname),te(e,"address")&&(r.address=e.address),r}var dt=t.readdir;function gt(){var e,r;for(e=[],r=0;r<arguments.length;r++)e.push(arguments[r]);dt.apply(null,e)}var vt=t.readdirSync;ce(gt,"sync",(function(e){try{return vt(e)}catch(e){return e}}));var ht=Z("simple-http-server:404"),mt=tt("File not found");var yt=e.resolve,bt=Z("simple-http-server:request-listener");function wt(e){return function(r,t){var n;bt("Received a request for %s",r.url),n=r.url.substring(1),""===(n=yt(e.dir,n)).substring(e.dir.length)&&(n=e.dir);bt("Request resolved to path %s",n),bt("Reading directory"),gt(n,(function(e,r){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return function(e,r){ht("Sending 404 response..."),r.statusCode=404,r.setHeader("Content-Type","text/plain"),r.setHeader("Content-Length",mt.length),r.end(mt)}()}))}}var jt=e,St=Z("simple-http-server");var Et={};return U(Et,"tempHttpServer",(function(e){var r,t,n,o,i,a,u,s,c;if(s={},arguments.length>1){if(!br(a=arguments[1]))throw new TypeError(N("invalid argument. Callback argument must be a function. Value: `%s`.",a))}else a=He;if(c=it(s,e))throw c;function l(e,r){var t;if(e)throw e;st("Server started."),(n=r).on("connection",f),n.once("close",b),s.open&&Yr("http://"+(t=n.address()).address+":"+t.port),a(null,n)}function f(e){var t=e.remoteAddress+":"+e.remotePort;st("Received a socket connection: %s.",t),r[t]=e,e.on("close",(function(){st("Socket connection closed: %s.",t),delete r[t]}))}function p(e,r){if(st("Received a request for %s",e.url),t)return g(e,r);if("/bundle.js"===e.url)return ot(n(h)),r.once("finish",m);if("/"!==e.url&&"/index.html"!==e.url)return d(e,r);function n(t){return function(){t(e,r)}}ot(n(v)),s.javascript||r.once("finish",m)}function d(e,r){st("Sending 404 response..."),r.statusCode=404,r.end()}function g(e,r){st("Sending 503 response..."),r.statusCode=503,r.end()}function v(e,r){st("Sending HTML..."),r.statusCode=200,r.setHeader("Content-Type","text/html"),r.setHeader("Content-Length",rt.byteLength(s.html.toString())),r.end(s.html)}function h(e,r){st("Sending JavaScript..."),r.statusCode=200,r.setHeader("Content-Type","text/javascript"),r.setHeader("Content-Length",rt.byteLength(s.javascript.toString())),r.end(s.javascript)}function m(){st("Finished serving content."),t=!0,st("Closing the server..."),n.close(),setTimeout(y,5e3)}function y(){var e,t;for(st("Destroying all connections..."),e=yr(r),t=0;t<e.length;t++)st("Destroying connection %s...",e[t]),r[e[t]].destroy()}function b(){st("Server closed.")}s.html&&le(s.html)&&(s.html=tt(s.html)),s.javascript&&le(s.javascript)&&(s.javascript=tt(s.javascript)),o=at(e),st("Serving provided content."),s.html||(st("No HTML content provided."),st("Loading a boilerplate HTML page..."),i=ut.resolve(__dirname,"../static/index.html"),s.html=Lr(i)),u=Ar(o,p),st("Starting server..."),u(l),r={}})),U(Et,"httpServer",Ar),U(Et,"simpleHttpServer",(function(){var e,r,t,n,o,i;if(o={},1===arguments.length)br(arguments[0])?t=arguments[0]:i=ft(o,e=arguments[0]);else if(arguments.length>1){if(e=arguments[0],!br(t=arguments[1]))throw new TypeError(N("invalid argument. Callback argument must be a function. Value: `%s`.",t));i=ft(o,e)}if(i)throw i;function a(e,n){var i;if(e)throw e;St("Server started."),(r=n).once("close",u),o.open&&Yr("http://"+(i=r.address()).address+":"+i.port),t(null,r)}function u(){St("Server closed.")}void 0===t&&(t=He),o.dir&&(o.dir=jt.resolve(lt(),o.dir)),St("Serving directory: %s",o.dir),n=Ar(e?pt(e):{},wt(o)),St("Starting server..."),n(a)})),Et}));
//# sourceMappingURL=index.js.map
