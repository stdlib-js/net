"use strict";var d=function(r,e){return function(){return e||r((e={exports:{}}).exports,e),e.exports}};var V=d(function(Ce,N){
var k=require('@stdlib/assert/is-nonnegative-integer/dist').isPrimitive,D=require('@stdlib/assert/is-string/dist').isPrimitive,Hr=require('@stdlib/assert/is-plain-object/dist'),S=require('@stdlib/assert/has-own-property/dist'),b=require('@stdlib/string/format/dist');function Rr(r,e){return Hr(e)?S(e,"port")&&(r.port=e.port,!k(r.port))?new TypeError(b('0kP2t',"port",r.port)):S(e,"maxport")&&(r.maxport=e.maxport,!k(r.maxport))?new TypeError(b('0kP2t',"maxport",r.maxport)):S(e,"hostname")&&(r.hostname=e.hostname,!D(r.hostname))?new TypeError(b('0kP2W',"hostname",r.hostname)):S(e,"address")&&(r.address=e.address,!D(r.address))?new TypeError(b('0kP2W',"address",r.address)):null:new TypeError(b('0kP2V',e));}N.exports=Rr
});var B=d(function(Le,Fr){Fr.exports={port:0,address:"127.0.0.1"}});var _=d(function(Pe,J){
var A=require("http"),kr=require("debug"),C=require('@stdlib/assert/is-function/dist'),M=require('@stdlib/string/format/dist'),U=V(),I=B(),q=kr("./../../http-server");function Dr(){var r,e,l,u,n,i,o,f;if(u=arguments.length,n={},u===1)C(arguments[0])?r=arguments[0]:(l=arguments[0],f=U(n,l));else if(u>1){if(l=arguments[0],r=arguments[1],!C(r))throw new TypeError(M('0kP5w',r));f=U(n,l)}if(f)throw f;return n.port===void 0?i=I.port:i=n.port,q("Server port: %d",i),n.maxport===void 0?o=i:o=n.maxport,q("Max server port: %d",o),n.hostname?e=n.hostname:n.address?e=n.address:e=I.address,q("Server hostname: %s",e),s;function s(m){var c;if(!C(m))throw new TypeError(M('0kP2b',m));r?c=A.createServer(r):c=A.createServer(),c.on("error",g),c.once("listening",E),q("Attempting to listen on %s:%d.",e,i),c.listen(i,e);function g(h){if(h.code==="EADDRINUSE"&&(q("Server address already in use: %s:%d.",e,i),i+=1,i<=o)){q("Attempting to listen on %s:%d.",e,i),c.listen(i,e);return}throw h}function E(){var h=c.address();q("HTTP server initialized. Server is listening for requests on %s:%d.",h.address,h.port),m(null,c)}}}J.exports=Dr
});var x=d(function(He,z){
var Nr=_();z.exports=Nr
});var W=d(function(Re,Q){
var K=require('@stdlib/assert/is-buffer/dist'),Vr=require('@stdlib/assert/is-boolean/dist').isPrimitive,G=require('@stdlib/assert/is-string/dist').isPrimitive,Br=require('@stdlib/assert/is-plain-object/dist'),L=require('@stdlib/assert/has-own-property/dist'),y=require('@stdlib/string/format/dist');function Ar(r,e){return Br(e)?L(e,"html")&&(r.html=e.html,!K(r.html)&&!G(r.html))?new TypeError(y('0kP5v',"html",r.html)):L(e,"javascript")&&(r.javascript=e.javascript,!K(r.javascript)&&!G(r.javascript))?new TypeError(y('0kP5v',"javascript",r.javascript)):L(e,"open")&&(r.open=e.open,!Vr(r.open))?new TypeError(y('0kP2o',"open",r.open)):null:new TypeError(y('0kP2V',e));}Q.exports=Ar
});var Y=d(function(Fe,X){
var w=require('@stdlib/assert/has-own-property/dist');function Mr(r){var e={};return w(r,"port")&&(e.port=r.port),w(r,"maxport")&&(e.maxport=r.maxport),w(r,"hostname")&&(e.hostname=r.hostname),w(r,"address")&&(e.address=r.address),e}X.exports=Mr
});var $=d(function(ke,Z){
function Ur(){return{}}Z.exports=Ur
});var ar=d(function(De,nr){
var Ir=require("path"),Jr=require("debug"),_r=require('@stdlib/utils/keys/dist'),zr=x(),Kr=require('@stdlib/fs/read-file/dist').sync,rr=require('@stdlib/assert/is-string/dist').isPrimitive,Gr=require('@stdlib/assert/is-function/dist'),Qr=require('@stdlib/utils/open-url/dist'),Wr=require('@stdlib/utils/noop/dist'),er=require('@stdlib/buffer/ctor/dist'),tr=require('@stdlib/buffer/from-string/dist'),ir=require('@stdlib/utils/next-tick/dist'),Xr=require('@stdlib/string/format/dist'),Yr=W(),Zr=Y(),$r=$(),v=Jr("disposable-http-server");function re(r){var e,l,u,n,i,o,f,s,m;if(s={},arguments.length>1){if(o=arguments[1],!Gr(o))throw new TypeError(Xr('0kP2b',o))}else o=Wr;if(m=Yr(s,r),m)throw m;s.html&&rr(s.html)&&(s.html=tr(s.html)),s.javascript&&rr(s.javascript)&&(s.javascript=tr(s.javascript)),n=Zr(r),v("Serving provided content."),s.html||(v("No HTML content provided."),v("Loading a boilerplate HTML page..."),i=Ir.resolve(__dirname,"../static/index.html"),s.html=Kr(i)),f=zr(n,E),v("Starting server..."),f(c),e=$r();function c(a,t){var p;if(a)throw a;v("Server started."),u=t,u.on("connection",g),u.once("close",Cr),s.open&&(p=u.address(),Qr("http://"+p.address+":"+p.port)),o(null,u)}function g(a){var t=a.remoteAddress+":"+a.remotePort;v("Received a socket connection: %s.",t),e[t]=a,a.on("close",p);function p(){v("Socket connection closed: %s.",t),delete e[t]}}function E(a,t){if(v("Received a request for %s",a.url),l)return Tr(a,t);if(a.url==="/bundle.js")return ir(p(jr)),t.once("finish",F);if(a.url!=="/"&&a.url!=="/index.html")return h(a,t);ir(p(Or)),s.javascript||t.once("finish",F);function p(Lr){return Pr;function Pr(){Lr(a,t)}}}function h(a,t){v("Sending 404 response..."),t.statusCode=404,t.end()}function Tr(a,t){v("Sending 503 response..."),t.statusCode=503,t.end()}function Or(a,t){v("Sending HTML..."),t.statusCode=200,t.setHeader("Content-Type","text/html"),t.setHeader("Content-Length",er.byteLength(s.html.toString())),t.end(s.html)}function jr(a,t){v("Sending JavaScript..."),t.statusCode=200,t.setHeader("Content-Type","text/javascript"),t.setHeader("Content-Length",er.byteLength(s.javascript.toString())),t.end(s.javascript)}function F(){v("Finished serving content."),l=!0,v("Closing the server..."),u.close(),setTimeout(Er,5e3)}function Er(){var a,t;for(v("Destroying all connections..."),a=_r(e),t=0;t<a.length;t++)v("Destroying connection %s...",a[t]),e[a[t]].destroy()}function Cr(){v("Server closed.")}}nr.exports=re
});var ur=d(function(Ne,sr){
var ee=ar();sr.exports=ee
});var dr=d(function(Ve,vr){
var te=require('@stdlib/assert/is-boolean/dist').isPrimitive,ie=require('@stdlib/assert/is-string/dist').isPrimitive,ne=require('@stdlib/assert/is-plain-object/dist'),or=require('@stdlib/assert/has-own-property/dist'),P=require('@stdlib/string/format/dist');function ae(r,e){return ne(e)?or(e,"dir")&&(r.dir=e.dir,!ie(r.dir))?new TypeError(P('0kP2W',"dir",r.dir)):or(e,"open")&&(r.open=e.open,!te(r.open))?new TypeError(P('0kP2o',"open",r.open)):null:new TypeError(P('0kP2V',e));}vr.exports=ae
});var cr=d(function(Be,lr){
var T=require('@stdlib/assert/has-own-property/dist');function se(r){var e={};return T(r,"port")&&(e.port=r.port),T(r,"maxport")&&(e.maxport=r.maxport),T(r,"hostname")&&(e.hostname=r.hostname),T(r,"address")&&(e.address=r.address),e}lr.exports=se
});var pr=d(function(Ae,mr){
var ue=require("debug"),oe=require('@stdlib/buffer/from-string/dist'),ve=ue("simple-http-server:404"),fr=oe("File not found");function de(r,e){ve("Sending 404 response..."),e.statusCode=404,e.setHeader("Content-Type","text/plain"),e.setHeader("Content-Length",fr.length),e.end(fr)}mr.exports=de
});var hr=d(function(Me,gr){
var le=require("path").resolve,ce=require("debug"),fe=require('@stdlib/fs/read-dir/dist'),me=pr(),H=ce("simple-http-server:request-listener");function pe(r){return e;function e(l,u){var n;H("Received a request for %s",l.url),n=l.url.substring(1),n=le(r.dir,n),n.substring(r.dir.length)===""&&(n=r.dir),H("Request resolved to path %s",n),H("Reading directory"),fe(n,i);function i(o,f){if(o&&(o.code==="ENOENT"||o.code==="ENOTDIR"))return me(u)}}}gr.exports=pe
});var xr=d(function(Ue,Sr){
var ge=require("path"),he=require("debug"),qe=require('@stdlib/process/cwd/dist'),be=x(),qr=require('@stdlib/assert/is-function/dist'),Se=require('@stdlib/utils/open-url/dist'),xe=require('@stdlib/string/format/dist'),ye=require('@stdlib/utils/noop/dist'),br=dr(),we=cr(),Te=hr(),O=he("simple-http-server");function Oe(){var r,e,l,u,n,i,o;if(i={},arguments.length===1)qr(arguments[0])?u=arguments[0]:(r=arguments[0],o=br(i,r));else if(arguments.length>1){if(r=arguments[0],u=arguments[1],!qr(u))throw new TypeError(xe('0kP2b',u));o=br(i,r)}if(o)throw o;u===void 0&&(u=ye),i.dir&&(i.dir=ge.resolve(qe(),i.dir)),O("Serving directory: %s",i.dir),r?l=we(r):l={},n=be(l,Te(i)),O("Starting server..."),n(f);function f(m,c){var g;if(m)throw m;O("Server started."),e=c,e.once("close",s),i.open&&(g=e.address(),Se("http://"+g.address+":"+g.port)),u(null,e)}function s(){O("Server closed.")}}Sr.exports=Oe
});var wr=d(function(Ie,yr){
var je=xr();yr.exports=je
});var R=require('@stdlib/utils/define-read-only-property/dist'),j={};R(j,"tempHttpServer",ur());R(j,"httpServer",x());R(j,"simpleHttpServer",wr());module.exports=j;
/** @license Apache-2.0 */
//# sourceMappingURL=index.js.map
